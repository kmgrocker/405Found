{"ast":null,"code":"function ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactTooltip from 'react-tooltip';\n\n___$insertStyle(\".blank {\\n  height: 28px;\\n  width: 28px;\\n}\\n\\n.loader {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  display: flex;\\n  background: rgba(240, 240, 240, 0.9);\\n  z-index: \\\"2\\\";\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.seat {\\n  background-color: #4FC3F7;\\n  height: 28px;\\n  width: 28px;\\n  color: #fff;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.seat__number {\\n  font-size: 10px;\\n}\\n.seat--north {\\n  border-top-left-radius: 8px;\\n  border-top-right-radius: 8px;\\n}\\n.seat--south {\\n  border-bottom-left-radius: 8px;\\n  border-bottom-right-radius: 8px;\\n}\\n.seat--east {\\n  border-top-left-radius: 8px;\\n  border-bottom-left-radius: 8px;\\n}\\n.seat--west {\\n  border-top-right-radius: 8px;\\n  border-bottom-right-radius: 8px;\\n}\\n.seat--enabled {\\n  cursor: pointer;\\n}\\n.seat--enabled:hover {\\n  background-color: #03A9F4;\\n}\\n.seat--selected {\\n  cursor: pointer;\\n  background-color: #4CAF50;\\n}\\n.seat--reserved {\\n  cursor: not-allowed;\\n  background-color: #E0E0E0;\\n}\\n\\n.seat-content {\\n  position: relative;\\n  overflow: hidden;\\n  margin: 0 auto;\\n}\\n\\n.seat-picker {\\n  display: flex;\\n  flex-direction: column;\\n  text-align: center;\\n  justify-content: center;\\n  align-items: center;\\n  width: max-content;\\n}\\n.seat-picker > *:not(:last-child) {\\n  margin-bottom: 2px;\\n}\\n.seat-picker__row {\\n  display: flex;\\n  align-items: center;\\n  justify-items: center;\\n}\\n.seat-picker__row > *:not(:last-child) {\\n  margin-right: 2px;\\n}\\n.seat-picker__row__number {\\n  font-weight: normal;\\n  height: 28px;\\n  width: 28px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  text-align: center;\\n  color: #9E9E9E;\\n}\\n.seat-picker__row--enabled:hover {\\n  background-color: #F5F5F5;\\n}\\n.seat-picker__row--selected {\\n  background-color: #F5F5F5;\\n}\\n.seat-picker__row--enabled:hover > .seat-picker__row__number {\\n  font-weight: 600;\\n}\\n.seat-picker__row--selected > .seat-picker__row__number {\\n  font-weight: 600;\\n}\");\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar RowNumber = /*#__PURE__*/function (_Component) {\n  _inherits(RowNumber, _Component);\n\n  function RowNumber() {\n    _classCallCheck(this, RowNumber);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RowNumber).apply(this, arguments));\n  }\n\n  _createClass(RowNumber, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.visible ? React.createElement(\"div\", {\n        className: \"seat-picker__row__number\"\n      }, this.props.rowNumber) : null;\n    }\n  }]);\n\n  return RowNumber;\n}(Component);\n\n_defineProperty(RowNumber, \"propTypes\", {\n  rowNumber: PropTypes.string,\n  visible: PropTypes.bool\n});\n\nvar Row = /*#__PURE__*/function (_Component) {\n  _inherits(Row, _Component);\n\n  function Row() {\n    _classCallCheck(this, Row);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Row).apply(this, arguments));\n  }\n\n  _createClass(Row, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          rowNumber = _this$props.rowNumber,\n          isSelected = _this$props.isSelected;\n      var className = \"seat-picker__row\" + (isSelected ? \" seat-picker__row--selected\" : \" seat-picker__row--enabled\");\n      return React.createElement(\"div\", {\n        className: className\n      }, React.createElement(RowNumber, {\n        rowNumber: rowNumber,\n        visible: visible\n      }), this.props.children);\n    }\n  }]);\n\n  return Row;\n}(Component);\n\n_defineProperty(Row, \"propTypes\", {\n  rowNumber: PropTypes.string,\n  visible: PropTypes.bool,\n  isSelected: PropTypes.bool,\n  children: PropTypes.array\n});\n\nvar Seat = /*#__PURE__*/function (_Component) {\n  _inherits(Seat, _Component);\n\n  function Seat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Seat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Seat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function () {\n      !_this.props.isReserved && _this.props.selectSeat();\n    });\n\n    return _this;\n  }\n\n  _createClass(Seat, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isSelected = _this$props.isSelected,\n          tooltip = _this$props.tooltip,\n          isEnabled = _this$props.isEnabled,\n          isReserved = _this$props.isReserved,\n          orientation = _this$props.orientation;\n      var className = \"seat\" + (isSelected ? \" seat--selected\" : \"\") + (!isSelected && isEnabled && !isReserved ? \" seat--enabled\" : \"\") + (isReserved ? \" seat--reserved\" : \"\") + \" seat--\".concat(!orientation ? \"north\" : orientation);\n      return React.createElement(\"div\", {\n        \"data-tip\": tooltip,\n        className: className,\n        onClick: this.handleClick\n      }, tooltip ? React.createElement(ReactTooltip, this.props.tooltipProps) : null, React.createElement(\"span\", {\n        className: \"seat__number\"\n      }, this.props.seatNumber));\n    }\n  }]);\n\n  return Seat;\n}(Component);\n\n_defineProperty(Seat, \"defaultProps\", {\n  isSelected: false\n});\n\nSeat.propTypes = {\n  isSelected: PropTypes.bool,\n  isReserved: PropTypes.bool,\n  tooltip: PropTypes.string,\n  isEnabled: PropTypes.bool,\n  orientation: PropTypes.oneOf([\"north\", \"south\", \"east\", \"west\"]),\n  seatNumber: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  selectSeat: PropTypes.func.isRequired,\n  tooltipProps: PropTypes.object\n};\n\nvar Blank = /*#__PURE__*/function (_Component) {\n  _inherits(Blank, _Component);\n\n  function Blank() {\n    _classCallCheck(this, Blank);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Blank).apply(this, arguments));\n  }\n\n  _createClass(Blank, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"blank\"\n      });\n    }\n  }]);\n\n  return Blank;\n}(Component);\n\nvar SeatPicker = /*#__PURE__*/function (_Component) {\n  _inherits(SeatPicker, _Component);\n\n  function SeatPicker(props) {\n    var _this;\n\n    _classCallCheck(this, SeatPicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SeatPicker).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getAlreadySelectedSeats\", function () {\n      var selectedSeats = {};\n      var size = 0;\n      var _this$props = _this.props,\n          maxReservableSeats = _this$props.maxReservableSeats,\n          alpha = _this$props.alpha,\n          selectedByDefault = _this$props.selectedByDefault;\n\n      if (selectedByDefault) {\n        _this.props.rows.forEach(function (row, index) {\n          var rowNumber = alpha ? String.fromCharCode(\"A\".charCodeAt(0) + index) : (index + 1).toString();\n          row.forEach(function (seat, index) {\n            if (seat && seat.isSelected) {\n              var seatAlreadySelected = _this.includeSeat(selectedSeats, rowNumber, seat.number);\n\n              if (size < maxReservableSeats && !seatAlreadySelected) {\n                selectedSeats = _this.addSeat(selectedSeats, rowNumber, seat.number, seat.id);\n                size = size + 1;\n              }\n            }\n          });\n        });\n      }\n\n      return {\n        selectedSeats: selectedSeats,\n        size: size\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"includeSeat\", function (selectedSeats, row, number) {\n      if (selectedSeats[row]) {\n        return !!selectedSeats[row][number];\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addSeat\", function (selectedSeats, row, number, id) {\n      if (selectedSeats[row]) {\n        if (!selectedSeats[row][number]) {\n          selectedSeats[row][number] = id;\n        }\n      } else {\n        selectedSeats[row] = {};\n        selectedSeats[row][number] = id;\n      }\n\n      return _objectSpread2({}, selectedSeats);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteSeat\", function (row, number) {\n      var selectedSeats = _this.state.selectedSeats;\n\n      if (selectedSeats[row]) {\n        delete selectedSeats[row][number];\n\n        if (!Object.keys(selectedSeats[row]).length > 0) {\n          delete selectedSeats[row];\n        }\n      }\n\n      return _objectSpread2({}, selectedSeats);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addTooltip\", function (tooltipOverrides, row, number, tooltip) {\n      if (!tooltipOverrides[row]) {\n        tooltipOverrides[row] = {};\n      }\n\n      tooltipOverrides[row][number] = tooltip;\n      return _objectSpread2({}, tooltipOverrides);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"acceptSelection\", function (row, number, id, tooltip) {\n      var _this$state = _this.state,\n          selectedSeats = _this$state.selectedSeats,\n          tooltipOverrides = _this$state.tooltipOverrides,\n          size = _this$state.size;\n      var maxReservableSeats = _this.props.maxReservableSeats;\n\n      if (size < maxReservableSeats) {\n        _this.setState({\n          tooltipOverrides: _this.addTooltip(tooltipOverrides, row, number, tooltip),\n          selectedSeats: _this.addSeat(selectedSeats, row, number, id),\n          size: size + 1\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"acceptDeselection\", function (row, number, tooltip) {\n      var _this$state2 = _this.state,\n          size = _this$state2.size,\n          tooltipOverrides = _this$state2.tooltipOverrides;\n\n      _this.setState({\n        tooltipOverrides: _this.addTooltip(tooltipOverrides, row, number, tooltip),\n        selectedSeats: _this.deleteSeat(row, number),\n        size: size - 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectSeat\", function (row, number, id) {\n      var selectedSeats = _this.state.selectedSeats;\n      var size = _this.state.size;\n      var _this$props2 = _this.props,\n          maxReservableSeats = _this$props2.maxReservableSeats,\n          addSeatCallback = _this$props2.addSeatCallback,\n          removeSeatCallback = _this$props2.removeSeatCallback,\n          continuous = _this$props2.continuous;\n\n      var seatAlreadySelected = _this.includeSeat(selectedSeats, row, number);\n\n      if (seatAlreadySelected) {\n        removeSeatCallback({\n          row: row,\n          number: number,\n          id: id\n        }, _this.acceptDeselection);\n      } else {\n        if (size < maxReservableSeats) {\n          addSeatCallback({\n            row: row,\n            number: number,\n            id: id\n          }, _this.acceptSelection);\n        } else if (continuous) {\n          var auxRow = Object.keys(selectedSeats)[0];\n          var auxNumber = Object.keys(selectedSeats[auxRow])[0];\n          addSeatCallback({\n            row: row,\n            number: number,\n            id: id\n          }, _this.acceptSelection, {\n            row: auxRow,\n            number: auxNumber,\n            id: selectedSeats[auxRow][auxNumber]\n          }, _this.acceptDeselection);\n        }\n      }\n    });\n\n    var rows = props.rows;\n\n    var _this$getAlreadySelec = _this.getAlreadySelectedSeats(),\n        _selectedSeats = _this$getAlreadySelec.selectedSeats,\n        _size = _this$getAlreadySelec.size;\n\n    _this.state = {\n      tooltipOverrides: {},\n      selectedSeats: _selectedSeats,\n      size: _size,\n      rowLength: Math.max.apply(null, rows.map(function (row) {\n        return row.length;\n      }))\n    };\n    return _this;\n  }\n\n  _createClass(SeatPicker, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return nextState.selectedSeats !== this.state.selectedSeats || this.props.loading !== nextProps.loading;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"seat-content\"\n      }, React.createElement(\"div\", {\n        className: this.props.loading ? \"loader\" : null\n      }), React.createElement(\"div\", {\n        className: \"seat-picker\"\n      }, this.renderRows()));\n    }\n  }, {\n    key: \"renderRows\",\n    value: function renderRows() {\n      var _this2 = this;\n\n      var seats = this.state.selectedSeats;\n      var _this$props3 = this.props,\n          alpha = _this$props3.alpha,\n          visible = _this$props3.visible;\n      return this.props.rows.map(function (row, index) {\n        var rowNumber = alpha ? String.fromCharCode(\"A\".charCodeAt(0) + index) : (index + 1).toString();\n        var isSelected = !!seats[rowNumber];\n        var props = {\n          visible: visible,\n          rowNumber: rowNumber,\n          isSelected: isSelected,\n          selectedSeat: null,\n          seats: row,\n          // key: `Row${rowNumber}`,\n          selectSeat: _this2.selectSeat\n        };\n        return React.createElement(Row, _extends({\n          key: index\n        }, props), _this2.renderSeats(row, rowNumber, isSelected), \" \");\n      });\n    }\n  }, {\n    key: \"renderSeats\",\n    value: function renderSeats(seats, rowNumber, isRowSelected) {\n      var _this3 = this;\n\n      var _this$state3 = this.state,\n          selectedSeats = _this$state3.selectedSeats,\n          size = _this$state3.size,\n          rowLength = _this$state3.rowLength,\n          tooltipOverrides = _this$state3.tooltipOverrides;\n      var _this$props4 = this.props,\n          maxReservableSeats = _this$props4.maxReservableSeats,\n          continuous = _this$props4.continuous;\n      var blanks = new Array(rowLength - seats.length > 0 ? rowLength - seats.length : 0).fill(0);\n      var row = seats.map(function (seat, index) {\n        if (seat === null) return React.createElement(Blank, {\n          key: index\n        });\n\n        var isSelected = isRowSelected && _this3.includeSeat(selectedSeats, rowNumber, seat.number);\n\n        var tooltip = seat.tooltip;\n\n        if (tooltipOverrides[rowNumber] && tooltipOverrides[rowNumber][seat.number] != null) {\n          tooltip = tooltipOverrides[rowNumber][seat.number];\n        }\n\n        var props = {\n          isSelected: isSelected,\n          orientation: seat.orientation,\n          isReserved: seat.isReserved,\n          tooltip: tooltip,\n          isEnabled: size < maxReservableSeats || continuous,\n          selectSeat: _this3.selectSeat.bind(_this3, rowNumber, seat.number, seat.id),\n          seatNumber: seat.number,\n          tooltipProps: _this3.props.tooltipProps\n        };\n        return React.createElement(Seat, _extends({\n          key: index\n        }, props));\n      });\n\n      if (blanks.length > 0) {\n        blanks.forEach(function (blank, index) {\n          row.push(React.createElement(Blank, {\n            key: row.length + index + 1\n          }));\n        });\n      }\n\n      return row;\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.maxReservableSeats < state.size) {\n        var sum = 0;\n        var selectedSeats = {};\n\n        for (var array in state.selectedSeats) {\n          if (sum + state.selectedSeats[array].length < props.maxReservableSeats) {\n            selectedSeats[array] = state.selectedSeats[array].slice(0);\n          } else {\n            var dif = props.maxReservableSeats - sum;\n            selectedSeats[array] = state.selectedSeats[array].slice(0, dif);\n            return {\n              selectedSeats: selectedSeats,\n              size: props.maxReservableSeats\n            };\n          }\n\n          sum = sum + state.selectedSeats[array].length;\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return SeatPicker;\n}(Component);\n\n_defineProperty(SeatPicker, \"defaultProps\", {\n  addSeatCallback: function addSeatCallback(_ref, addCb) {\n    var row = _ref.row,\n        number = _ref.number,\n        id = _ref.id;\n    console.log(\"Added seat \".concat(number, \", row \").concat(row, \", id \").concat(id));\n    addCb(row, number, id);\n  },\n  removeSeatCallback: function removeSeatCallback(_ref2, removeCb) {\n    var row = _ref2.row,\n        number = _ref2.number,\n        id = _ref2.id;\n    console.log(\"Removed seat \".concat(number, \", row \").concat(row, \", id \").concat(id));\n    removeCb(row, number);\n  },\n  maxReservableSeats: 0\n});\n\nSeatPicker.propTypes = {\n  addSeatCallback: PropTypes.func,\n  alpha: PropTypes.bool,\n  visible: PropTypes.bool,\n  continuous: PropTypes.bool,\n  selectedByDefault: PropTypes.bool,\n  removeSeatCallback: PropTypes.func,\n  maxReservableSeats: PropTypes.number,\n  rows: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.shape({\n    number: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    isReserved: PropTypes.bool,\n    tooltip: PropTypes.string,\n    isSelected: PropTypes.bool\n  }))).isRequired,\n  tooltipProps: PropTypes.object,\n  loading: PropTypes.bool\n};\nexport default SeatPicker;","map":{"version":3,"sources":["../src/SeatPicker/RowNumber.js","../src/SeatPicker/Row.js","../src/SeatPicker/Seat.js","../src/SeatPicker/Blank.js","../src/SeatPicker/SeatPicker.js"],"names":["RowNumber","Component","rowNumber","PropTypes","visible","bool","Row","isSelected","children","array","className","Seat","tooltip","isEnabled","isReserved","orientation","handleClick","seatNumber","selectSeat","tooltipProps","object","Blank","SeatPicker","addSeatCallback","row","number","id","console","addCb","removeSeatCallback","removeCb","maxReservableSeats","rows","props","selectedSeats","size","tooltipOverrides","rowLength","state","sum","dif","nextState","nextProps","alpha","selectedByDefault","String","index","seat","seatAlreadySelected","Object","continuous","auxRow","auxNumber","seats","selectedSeat","blanks","isRowSelected","loading"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class RowNumber extends Component {\n  static propTypes = {\n    rowNumber: PropTypes.string,\n    visible: PropTypes.bool,\n  };\n\n  render() {\n    return this.props.visible ? (\n      <div className=\"seat-picker__row__number\">{this.props.rowNumber}</div>\n    ) : null;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport RowNumber from \"./RowNumber\";\n\nexport default class Row extends Component {\n  static propTypes = {\n    rowNumber: PropTypes.string,\n    visible: PropTypes.bool,\n    isSelected: PropTypes.bool,\n    children: PropTypes.array,\n  };\n\n  render() {\n    const { visible, rowNumber, isSelected } = this.props;\n    const className =\n      \"seat-picker__row\" +\n      (isSelected\n        ? \" seat-picker__row--selected\"\n        : \" seat-picker__row--enabled\");\n    return (\n      <div className={className}>\n        <RowNumber rowNumber={rowNumber} visible={visible} />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactTooltip from \"react-tooltip\";\n\nexport default class Seat extends Component {\n  static defaultProps = {\n    isSelected: false,\n  };\n\n  handleClick = () => {\n    !this.props.isReserved && this.props.selectSeat();\n  };\n\n  render() {\n    const {\n      isSelected,\n      tooltip,\n      isEnabled,\n      isReserved,\n      orientation,\n    } = this.props;\n    const className =\n      \"seat\" +\n      (isSelected ? \" seat--selected\" : \"\") +\n      (!isSelected && isEnabled && !isReserved ? \" seat--enabled\" : \"\") +\n      (isReserved ? \" seat--reserved\" : \"\") +\n      ` seat--${!orientation ? \"north\" : orientation}`;\n    return (\n      <div data-tip={tooltip} className={className} onClick={this.handleClick}>\n        {tooltip ? <ReactTooltip {...this.props.tooltipProps} /> : null}\n        <span className=\"seat__number\">{this.props.seatNumber}</span>\n      </div>\n    );\n  }\n}\n\nSeat.propTypes = {\n  isSelected: PropTypes.bool,\n  isReserved: PropTypes.bool,\n  tooltip: PropTypes.string,\n  isEnabled: PropTypes.bool,\n  orientation: PropTypes.oneOf([\"north\", \"south\", \"east\", \"west\"]),\n  seatNumber: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  selectSeat: PropTypes.func.isRequired,\n  tooltipProps: PropTypes.object,\n};\n","import React, { Component } from \"react\";\n\nexport default class Blank extends Component {\n  render() {\n    return <div className=\"blank\" />;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Row from \"./Row\";\nimport Seat from \"./Seat\";\nimport Blank from \"./Blank\";\n\nexport class SeatPicker extends Component {\n  static defaultProps = {\n    addSeatCallback: ({ row, number, id }, addCb) => {\n      console.log(`Added seat ${number}, row ${row}, id ${id}`);\n      addCb(row, number, id);\n    },\n    removeSeatCallback: ({ row, number, id }, removeCb) => {\n      console.log(`Removed seat ${number}, row ${row}, id ${id}`);\n      removeCb(row, number);\n    },\n    maxReservableSeats: 0,\n  };\n\n  constructor(props) {\n    super(props);\n    const { rows } = props;\n    const { selectedSeats, size } = this.getAlreadySelectedSeats();\n    this.state = {\n      tooltipOverrides: {},\n      selectedSeats: selectedSeats,\n      size: size,\n      rowLength: Math.max.apply(\n        null,\n        rows.map(row => row.length)\n      ),\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.maxReservableSeats < state.size) {\n      let sum = 0;\n      const selectedSeats = {};\n      for (const array in state.selectedSeats) {\n        if (\n          sum + state.selectedSeats[array].length <\n          props.maxReservableSeats\n        ) {\n          selectedSeats[array] = state.selectedSeats[array].slice(0);\n        } else {\n          const dif = props.maxReservableSeats - sum;\n          selectedSeats[array] = state.selectedSeats[array].slice(0, dif);\n          return {\n            selectedSeats: selectedSeats,\n            size: props.maxReservableSeats,\n          };\n        }\n        sum = sum + state.selectedSeats[array].length;\n      }\n    }\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      nextState.selectedSeats !== this.state.selectedSeats ||\n      this.props.loading !== nextProps.loading\n    );\n  }\n\n  getAlreadySelectedSeats = () => {\n    let selectedSeats = {};\n    let size = 0;\n    const { maxReservableSeats, alpha, selectedByDefault } = this.props;\n    if (selectedByDefault) {\n      this.props.rows.forEach((row, index) => {\n        const rowNumber = alpha\n          ? String.fromCharCode(\"A\".charCodeAt(0) + index)\n          : (index + 1).toString();\n        row.forEach((seat, index) => {\n          if (seat && seat.isSelected) {\n            const seatAlreadySelected = this.includeSeat(\n              selectedSeats,\n              rowNumber,\n              seat.number\n            );\n            if (size < maxReservableSeats && !seatAlreadySelected) {\n              selectedSeats = this.addSeat(\n                selectedSeats,\n                rowNumber,\n                seat.number,\n                seat.id\n              );\n              size = size + 1;\n            }\n          }\n        });\n      });\n    }\n    return { selectedSeats, size };\n  };\n\n  includeSeat = (selectedSeats, row, number) => {\n    if (selectedSeats[row]) {\n      return !!selectedSeats[row][number];\n    }\n    return false;\n  };\n\n  addSeat = (selectedSeats, row, number, id) => {\n    if (selectedSeats[row]) {\n      if (!selectedSeats[row][number]) {\n        selectedSeats[row][number] = id;\n      }\n    } else {\n      selectedSeats[row] = {};\n      selectedSeats[row][number] = id;\n    }\n    return { ...selectedSeats };\n  };\n\n  deleteSeat = (row, number) => {\n    const { selectedSeats } = this.state;\n    if (selectedSeats[row]) {\n      delete selectedSeats[row][number];\n      if (!Object.keys(selectedSeats[row]).length > 0) {\n        delete selectedSeats[row];\n      }\n    }\n    return { ...selectedSeats };\n  };\n\n  addTooltip = (tooltipOverrides, row, number, tooltip) => {\n    if (!tooltipOverrides[row]) {\n      tooltipOverrides[row] = {};\n    }\n    tooltipOverrides[row][number] = tooltip;\n    return { ...tooltipOverrides };\n  };\n\n  acceptSelection = (row, number, id, tooltip) => {\n    const { selectedSeats, tooltipOverrides, size } = this.state;\n    const { maxReservableSeats } = this.props;\n    if (size < maxReservableSeats) {\n      this.setState({\n        tooltipOverrides: this.addTooltip(\n          tooltipOverrides,\n          row,\n          number,\n          tooltip\n        ),\n        selectedSeats: this.addSeat(selectedSeats, row, number, id),\n        size: size + 1,\n      });\n    }\n  };\n\n  acceptDeselection = (row, number, tooltip) => {\n    const { size, tooltipOverrides } = this.state;\n    this.setState({\n      tooltipOverrides: this.addTooltip(tooltipOverrides, row, number, tooltip),\n      selectedSeats: this.deleteSeat(row, number),\n      size: size - 1,\n    });\n  };\n\n  selectSeat = (row, number, id) => {\n    const { selectedSeats } = this.state;\n    const size = this.state.size;\n    const {\n      maxReservableSeats,\n      addSeatCallback,\n      removeSeatCallback,\n      continuous,\n    } = this.props;\n    const seatAlreadySelected = this.includeSeat(selectedSeats, row, number);\n\n    if (seatAlreadySelected) {\n      removeSeatCallback({ row, number, id }, this.acceptDeselection);\n    } else {\n      if (size < maxReservableSeats) {\n        addSeatCallback({ row, number, id }, this.acceptSelection);\n      } else if (continuous) {\n        const auxRow = Object.keys(selectedSeats)[0];\n        const auxNumber = Object.keys(selectedSeats[auxRow])[0];\n        addSeatCallback(\n          { row, number, id },\n          this.acceptSelection,\n          {\n            row: auxRow,\n            number: auxNumber,\n            id: selectedSeats[auxRow][auxNumber],\n          },\n          this.acceptDeselection\n        );\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"seat-content\">\n        <div className={this.props.loading ? \"loader\" : null} />\n        <div className=\"seat-picker\">{this.renderRows()}</div>\n      </div>\n    );\n  }\n\n  renderRows() {\n    const { selectedSeats: seats } = this.state;\n    const { alpha, visible } = this.props;\n    return this.props.rows.map((row, index) => {\n      const rowNumber = alpha\n        ? String.fromCharCode(\"A\".charCodeAt(0) + index)\n        : (index + 1).toString();\n      const isSelected = !!seats[rowNumber];\n      const props = {\n        visible,\n        rowNumber,\n        isSelected,\n        selectedSeat: null,\n        seats: row,\n        // key: `Row${rowNumber}`,\n        selectSeat: this.selectSeat,\n      };\n\n      return (\n        <Row key={index} {...props}>\n          {this.renderSeats(row, rowNumber, isSelected)}{\" \"}\n        </Row>\n      );\n    });\n  }\n\n  renderSeats(seats, rowNumber, isRowSelected) {\n    const { selectedSeats, size, rowLength, tooltipOverrides } = this.state;\n    const { maxReservableSeats, continuous } = this.props;\n    const blanks = new Array(\n      rowLength - seats.length > 0 ? rowLength - seats.length : 0\n    ).fill(0);\n    const row = seats.map((seat, index) => {\n      if (seat === null) return <Blank key={index} />;\n      const isSelected =\n        isRowSelected &&\n        this.includeSeat(selectedSeats, rowNumber, seat.number);\n      let tooltip = seat.tooltip;\n      if (\n        tooltipOverrides[rowNumber] &&\n        tooltipOverrides[rowNumber][seat.number] != null\n      ) {\n        tooltip = tooltipOverrides[rowNumber][seat.number];\n      }\n      const props = {\n        isSelected,\n        orientation: seat.orientation,\n        isReserved: seat.isReserved,\n        tooltip,\n        isEnabled: size < maxReservableSeats || continuous,\n        selectSeat: this.selectSeat.bind(this, rowNumber, seat.number, seat.id),\n        seatNumber: seat.number,\n        tooltipProps: this.props.tooltipProps,\n      };\n      return <Seat key={index} {...props} />;\n    });\n    if (blanks.length > 0) {\n      blanks.forEach((blank, index) => {\n        row.push(<Blank key={row.length + index + 1} />);\n      });\n    }\n    return row;\n  }\n}\n\nSeatPicker.propTypes = {\n  addSeatCallback: PropTypes.func,\n  alpha: PropTypes.bool,\n  visible: PropTypes.bool,\n  continuous: PropTypes.bool,\n  selectedByDefault: PropTypes.bool,\n  removeSeatCallback: PropTypes.func,\n  maxReservableSeats: PropTypes.number,\n  rows: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        number: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        isReserved: PropTypes.bool,\n        tooltip: PropTypes.string,\n        isSelected: PropTypes.bool,\n      })\n    )\n  ).isRequired,\n  tooltipProps: PropTypes.object,\n  loading: PropTypes.bool,\n};\n"]},"metadata":{},"sourceType":"module"}